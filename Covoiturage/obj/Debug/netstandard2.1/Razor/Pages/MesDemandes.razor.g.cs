#pragma checksum "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "112a34932fd8c0569ad1e3e3166f4e3ca1479ed6"
// <auto-generated/>
#pragma warning disable 1591
namespace Covoiturage.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Covoiturage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\_Imports.razor"
using Covoiturage.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
using Covoiturage.Payloads.Request;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
using Covoiturage.Payloads.Response;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/mesdemandes")]
    public partial class MesDemandes : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#nullable restore
#line 9 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
 if (_demandes != null)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "row");
            __builder.AddAttribute(2, "style", "display: flex; flex-wrap: wrap; justify-content: space-around;");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "col");
            __builder.AddAttribute(5, "style", "display: flex; flex-wrap: wrap; justify-content: space-around;");
#nullable restore
#line 13 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
             foreach (var demandeRequest in _demandes)
            {
                etatColor = demandeRequest.etat switch
                {
                    "accepté" => "alert-primary",
                    "refusé" => "alert-danger",
                    _ => ""
                };

#line default
#line hidden
#nullable disable
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "card" + " " + (
#nullable restore
#line 21 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                  etatColor

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(8, "style", "width: 48%; margin-bottom: 20px");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "card-body row ");
            __builder.AddMarkupContent(11, "<div><svg width=\"8em\" height=\"8em\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 923.8 753.71\"><title>map</title><ellipse cx=\"1007.29\" cy=\"789.73\" rx=\"19.99\" ry=\"48.53\" transform=\"translate(-401.49 870.42) rotate(-45)\" fill=\"#6c63ff\" opacity=\"0.1\"></ellipse><ellipse cx=\"872.63\" cy=\"705.7\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"688.53\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"671.36\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"654.19\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"637.02\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"619.85\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"872.63\" cy=\"602.68\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><path d=\"M1050.9,558.33a51.13,51.13,0,0,0,4-5.88l-28.2-4.63,30.5.22a51.54,51.54,0,0,0,1-40.73l-40.91,21.23L1055,500.8a51.41,51.41,0,1,0-84.9,57.53,51.16,51.16,0,0,0-5.86,9.37l36.6,19-39-13.1a51.45,51.45,0,0,0,8.29,48.27,51.4,51.4,0,1,0,80.8,0,51.41,51.41,0,0,0,0-63.56Z\" transform=\"translate(-138.1 -73.15)\" fill=\"#6c63ff\"></path><path d=\"M959.1,590.11a51.16,51.16,0,0,0,11,31.78,51.4,51.4,0,1,0,80.8,0C1057.79,613.15,959.1,584.34,959.1,590.11Z\" transform=\"translate(-138.1 -73.15)\" opacity=\"0.1\"></path><polygon points=\"846.97 0 846.97 720 602.97 686 306.36 746.51 303.97 747 67.97 682 67.97 56 312.97 0 580.97 56 591.16 53.85 846.97 0\" fill=\"#444053\"></polygon><polygon points=\"805.97 39.32 805.97 683.53 587.66 653.11 322.27 707.25 320.13 707.68 108.97 649.53 108.97 89.42 328.19 39.32 567.97 89.42 577.09 87.5 805.97 39.32\" fill=\"#fff\"></polygon><polygon points=\"602.97 686 306.36 746.51 312.97 0 580.97 56 591.16 53.85 602.97 686\" opacity=\"0.1\"></polygon><g opacity=\"0.3\"><polyline points=\"573.35 138 573.47 347.5 660.47 347.5 660.47 261.5 809.47 261.5 826.97 239.06\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></polyline><polyline points=\"88.97 204.5 412.47 204.5 432.47 195.5 440.47 195.5 440.47 397.5 580.47 397.5 586.47 415.5 586.47 506.5 694.47 506.5 694.47 619\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></polyline><line x1=\"483.2\" y1=\"619\" x2=\"483.2\" y2=\"397.5\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"826.97\" y1=\"559.66\" x2=\"483.2\" y2=\"559.66\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"740.87\" y1=\"138\" x2=\"740.87\" y2=\"619\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"87.97\" y1=\"517.14\" x2=\"826.97\" y2=\"517.14\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"177.91\" y1=\"619\" x2=\"177.91\" y2=\"138\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"349.69\" y1=\"138\" x2=\"349.69\" y2=\"619\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"88.97\" y1=\"259.5\" x2=\"660.47\" y2=\"261.5\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"255.3\" y1=\"138.87\" x2=\"255.3\" y2=\"619\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><polyline points=\"87.97 370.82 349.69 370.82 483.2 517.14\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></polyline><line x1=\"512.12\" y1=\"138\" x2=\"512.12\" y2=\"397.5\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line><line x1=\"483.2\" y1=\"443.98\" x2=\"826.97\" y2=\"443.98\" fill=\"none\" stroke=\"#444053\" stroke-miterlimit=\"10\" stroke-width=\"3\"></line></g><polygon points=\"585.97 442 484.97 442 484.97 398 580.47 397.5 586.47 414.5 585.97 442\" fill=\"#6c63ff\"></polygon><path d=\"M674.07,287.15a55.28,55.28,0,0,0-55.28,55.28c0,30.53,55.28,129.72,55.28,129.72S729.35,373,729.35,342.43A55.28,55.28,0,0,0,674.07,287.15Zm0,78.86a24.32,24.32,0,1,1,24.32-24.32A24.32,24.32,0,0,1,674.07,366Z\" transform=\"translate(-138.1 -73.15)\" fill=\"#6c63ff\"></path><path d=\"M674.07,287.15a55.28,55.28,0,0,0-55.28,55.28c0,30.53,55.28,129.72,55.28,129.72S729.35,373,729.35,342.43A55.28,55.28,0,0,0,674.07,287.15Zm0,78.86a24.32,24.32,0,1,1,24.32-24.32A24.32,24.32,0,0,1,674.07,366Z\" transform=\"translate(-138.1 -73.15)\" opacity=\"0.1\"></path><path d=\"M674.07,295.15a55.28,55.28,0,0,0-55.28,55.28c0,30.53,55.28,129.72,55.28,129.72S729.35,381,729.35,350.43A55.28,55.28,0,0,0,674.07,295.15Zm0,78.86a24.32,24.32,0,1,1,24.32-24.32A24.32,24.32,0,0,1,674.07,374Z\" transform=\"translate(-138.1 -73.15)\" fill=\"#6c63ff\"></path><ellipse cx=\"649.86\" cy=\"806.61\" rx=\"33.45\" ry=\"13.78\" transform=\"translate(-404.13 249.64) rotate(-23.3)\" fill=\"#6c63ff\" opacity=\"0.1\"></ellipse><ellipse cx=\"511.39\" cy=\"727.97\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"716.13\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"704.3\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"692.47\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"680.63\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"668.8\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"511.39\" cy=\"656.97\" rx=\"7.4\" ry=\"9.68\" fill=\"#3f3d56\"></ellipse><path d=\"M621.8,649.13a36.12,36.12,0,0,1-2.76-4l19.44-3.2-21,.16a35.54,35.54,0,0,1-.68-28.07L645,628.6l-26-19.12a35.43,35.43,0,1,1,58.51,39.65,35.55,35.55,0,0,1,4,6.46L656.3,668.7l26.9-9a35.45,35.45,0,0,1-5.71,33.27,35.43,35.43,0,1,1-55.69,0,35.44,35.44,0,0,1,0-43.81Z\" transform=\"translate(-138.1 -73.15)\" fill=\"#6c63ff\"></path><path d=\"M685.07,671a35.28,35.28,0,0,1-7.58,21.91,35.43,35.43,0,1,1-55.69,0C617.05,686.91,685.07,667.06,685.07,671Z\" transform=\"translate(-138.1 -73.15)\" opacity=\"0.1\"></path><ellipse cx=\"186.29\" cy=\"767.73\" rx=\"19.99\" ry=\"48.53\" transform=\"translate(-626.4 283.44) rotate(-45)\" fill=\"#6c63ff\" opacity=\"0.1\"></ellipse><ellipse cx=\"51.63\" cy=\"683.7\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"666.53\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"649.36\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"632.19\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"615.02\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"597.85\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><ellipse cx=\"51.63\" cy=\"580.68\" rx=\"10.73\" ry=\"14.05\" fill=\"#3f3d56\"></ellipse><path d=\"M229.9,536.33a51.13,51.13,0,0,0,4-5.88l-28.2-4.63,30.5.22a51.54,51.54,0,0,0,1-40.73l-40.91,21.23L234,478.8a51.41,51.41,0,1,0-84.9,57.53,51.16,51.16,0,0,0-5.86,9.37l36.6,19-39-13.1a51.45,51.45,0,0,0,8.29,48.27,51.4,51.4,0,1,0,80.8,0,51.41,51.41,0,0,0,0-63.56Z\" transform=\"translate(-138.1 -73.15)\" fill=\"#6c63ff\"></path><path d=\"M138.1,568.11a51.16,51.16,0,0,0,11,31.78,51.4,51.4,0,1,0,80.8,0C236.79,591.15,138.1,562.34,138.1,568.11Z\" transform=\"translate(-138.1 -73.15)\" opacity=\"0.1\"></path></svg></div>\r\n\r\n                        ");
            __builder.OpenElement(12, "div");
            __builder.AddAttribute(13, "class", "text-capitalize ");
            __builder.AddAttribute(14, "style", "padding-left: 30px");
            __builder.AddMarkupContent(15, "\r\n                            Date: ");
            __builder.AddContent(16, 
#nullable restore
#line 28 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                   demandeRequest.dateDemande

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(17, " <br>\r\n                            Etat: ");
            __builder.OpenElement(18, "span");
            __builder.AddAttribute(19, "class", "alert-info");
            __builder.AddContent(20, 
#nullable restore
#line 29 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                                            demandeRequest.etat

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(21, " <br>\r\n                            Depart: ");
            __builder.AddContent(22, 
#nullable restore
#line 30 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                     demandeRequest.offre.lieuDepart

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(23, " <br>\r\n                            Arrivée: ");
            __builder.AddContent(24, 
#nullable restore
#line 31 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                      demandeRequest.offre.lieuArrivee

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(25, " <br>\r\n                            <br>\r\n                            ");
            __builder.OpenElement(26, "div");
            __builder.AddAttribute(27, "class", "form-group");
            __builder.OpenElement(28, "button");
            __builder.AddAttribute(29, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
                                                  () => HandleAnnuler(demandeRequest.id)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(30, "class", "btn btn-primary");
            __builder.AddContent(31, "Annuler");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\r\n                <br>");
#nullable restore
#line 40 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 43 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
}
else
{
    

#line default
#line hidden
#nullable disable
#nullable restore
#line 46 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
     if (loading)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<Covoiturage.Pages.Loading>(33);
            __builder.CloseComponent();
#nullable restore
#line 49 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<Covoiturage.Pages.Empty>(34);
            __builder.CloseComponent();
#nullable restore
#line 53 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 53 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
     
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 56 "C:\Users\diarr\source\repos\Covoiturage\Covoiturage\Pages\MesDemandes.razor"
       
    private List<DemandeRequest> _demandes;
    private string etatColor = "";
    private bool loading = true;

    protected override async Task OnInitializedAsync()
    {
        var token = await Js.InvokeAsync<string>("getItemLs", new object[] { "token" });
        if (!string.IsNullOrEmpty(token))
        {
            //HttpClient.DefaultRequestHeaders.Add("Access-Control-Allow-Origin", "*");
            //HttpClient.DefaultRequestHeaders.Add("crossorigin", "true");
            var id = await Js.InvokeAsync<string>("getItemLs", "id");
            var response = await HttpClient.GetAsync("http://localhost:8080/api/demande/mesdemandes/" + id);
            if (response.IsSuccessStatusCode)
            {
                _demandes = await response.Content.ReadFromJsonAsync<List<DemandeRequest>>();
                if (_demandes == null || _demandes.Count == 0)
                {
                    _demandes = null;
                    loading = false;
                    StateHasChanged();
                    await Js.InvokeVoidAsync("showToast", "succes", "Aucune demande n'a été trouvée");

                }
            }
            else
            {
                await Js.InvokeVoidAsync("showToast", "error", "Une erreur est survenue");
            }
        }
    }

    private async void HandleAnnuler(long demandeId)
    {
        var res = await HttpClient.DeleteAsync("http://localhost:8080/api/demande/annuler/" + demandeId);
        if (res.IsSuccessStatusCode)
        {
            var d = _demandes.Where(d => d.id == demandeId).ToList()[0];
            _demandes.Remove(d);
            StateHasChanged();
            await Js.InvokeVoidAsync("showToast", "success", "Demande annulée avec succès");

        }
        else
            //var message = await res.Content.ReadFromJsonAsync<MessageResponse>();
            await Js.InvokeVoidAsync("showToast", "error", "Une erreur est survenue");
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient HttpClient { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime Js { get; set; }
    }
}
#pragma warning restore 1591
